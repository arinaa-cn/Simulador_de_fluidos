
<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Simulador de viscosidad — Agua / Aceite / Miel</title>
<style>
  :root{
    --tube-w:120px;
    --tube-h:520px;
    --sphere-d:38px;
  }
  html,body{
    height:100%;margin:0;font-family:Inter, system-ui, sans-serif;
    background: linear-gradient(135deg, #2c3e50, #34495e);
  }
  .container{max-width:1100px;margin:24px auto;padding:18px;color:#ecf0f1;}
  header{display:flex;align-items:center;justify-content:space-between;gap:12px}
  h1{font-size:20px;margin:0}
  .controls{display:flex;gap:8px;align-items:center}
  button{background:linear-gradient(180deg,#fff,#d7e6ff);border:0;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:600}
  button.secondary{background:#2c3e50;color:#fff;border:1px solid #95a5a6}
  .sim{display:flex;gap:32px;align-items:flex-start;margin-top:18px;justify-content:center}
  .tube-wrap{width:var(--tube-w);text-align:center;position:relative}
  .tube{
    width:var(--tube-w);height:var(--tube-h);border-radius:18px;overflow:hidden;
    box-shadow: inset 0 6px 18px rgba(0,0,0,0.6), 0 6px 30px rgba(0,0,0,0.35);
    border:2px solid #7f8c8d;
    display:flex;align-items:flex-start;justify-content:center;position:relative;
    padding-top:12px;
    background:#bdc3c7;
  }
  .fluid{width:92%;height:92%;border-radius:12px;position:absolute;bottom:0;left:4%;display:block;box-shadow: inset 0 -10px 40px rgba(0,0,0,0.25);}
  .fluid.water{background:linear-gradient(180deg, rgba(41,128,185,0.8), rgba(52,152,219,0.95));}
  .fluid.oil{background:linear-gradient(180deg, rgba(241,196,15,0.85), rgba(243,156,18,0.95));}
  .fluid.honey{background:linear-gradient(180deg, rgba(211,84,0,0.85), rgba(155,89,182,0.9));}
  .label{margin-top:12px;font-weight:700}
  .sphere{width:var(--sphere-d);height:var(--sphere-d);border-radius:50%;position:absolute;left:50%;transform:translateX(-50%);box-shadow:0 8px 18px rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;font-weight:700;color:#111}
  .sphere.blue{background:radial-gradient(circle at 30% 30%, #5dade2, #154360);color:#fff}
  .sphere.yellow{background:radial-gradient(circle at 30% 30%, #f7dc6f, #b7950b);color:#2b1200}
  .sphere.amber{background:radial-gradient(circle at 30% 30%, #f0b27a, #873600);color:#fff}
  .tube-foot{height:48px;margin-top:8px;display:flex;flex-direction:column;align-items:center;gap:6px}
  .time-box{background:rgba(255,255,255,0.06);padding:6px 10px;border-radius:8px;min-width:120px}
  .credits{font-size:12px;opacity:0.8;margin-top:12px}
  footer{margin-top:18px;color:#bdc3c7;opacity:0.9}
  .legend{display:flex;gap:8px;align-items:center}
  .dot{width:12px;height:12px;border-radius:3px}
  @media(max-width:880px){.sim{flex-direction:column;align-items:center}}
</style>
</head>
<body>
<div class="container">
  <header>
    <div>
      <h1>Simulador: caída de esferas en Agua / Aceite / Miel</h1>
      <div style="font-size:12px;opacity:0.85">Con tiempos más lentos para visualizar mejor la diferencia de viscosidades.</div>
    </div>
    <div class="controls">
      <button id="startBtn">Iniciar</button>
      <button id="pauseBtn" class="secondary">Pausa</button>
      <button id="resumeBtn" class="secondary">Reanudar</button>
    </div>
  </header>

  <section class="sim" id="simArea">
    <div class="tube-wrap" data-fluid="water">
      <div class="tube" id="tube-water">
        <div class="fluid water"></div>
        <div class="sphere blue" id="sphere-water" style="top:12px;"></div>
      </div>
      <div class="label">Agua</div>
      <div class="tube-foot"><div class="time-box" id="time-water">Tiempo: — s</div></div>
    </div>
    <div class="tube-wrap" data-fluid="oil">
      <div class="tube" id="tube-oil">
        <div class="fluid oil"></div>
        <div class="sphere yellow" id="sphere-oil" style="top:12px;"></div>
      </div>
      <div class="label">Aceite</div>
      <div class="tube-foot"><div class="time-box" id="time-oil">Tiempo: — s</div></div>
    </div>
    <div class="tube-wrap" data-fluid="honey">
      <div class="tube" id="tube-honey">
        <div class="fluid honey"></div>
        <div class="sphere amber" id="sphere-honey" style="top:12px;"></div>
      </div>
      <div class="label">Miel</div>
      <div class="tube-foot"><div class="time-box" id="time-honey">Tiempo: — s</div></div>
    </div>
  </section>

  <div class="credits">
    Nota: los tiempos fueron ralentizados intencionalmente para que se aprecie mejor la diferencia de viscosidades entre Agua, Aceite y Miel.
  </div>

  <footer>
    <div class="legend">
      <div class="dot" style="background:#5dade2"></div> Agua
      <div style="width:12px"></div>
      <div class="dot" style="background:#f7dc6f"></div> Aceite
      <div style="width:12px"></div>
      <div class="dot" style="background:#f0b27a"></div> Miel
    </div>
  </footer>
</div>

<script>
(function(){
  const startBtn = document.getElementById('startBtn');
  const pauseBtn = document.getElementById('pauseBtn');
  const resumeBtn = document.getElementById('resumeBtn');
  const spheres = {
    water: document.getElementById('sphere-water'),
    oil: document.getElementById('sphere-oil'),
    honey: document.getElementById('sphere-honey')
  };
  const times = {
    water: document.getElementById('time-water'),
    oil: document.getElementById('time-oil'),
    honey: document.getElementById('time-honey')
  };
  const tubes = {
    water: document.getElementById('tube-water'),
    oil: document.getElementById('tube-oil'),
    honey: document.getElementById('tube-honey')
  };

  let anim=null,paused=false,t0=null,startOffsets={water:0,oil:0,honey:0};
  const durations={water:4, oil:8, honey:15}; // tiempos ralentizados

  function prepare(){
    Object.keys(spheres).forEach(k=>{
      spheres[k].style.top="12px";
      times[k].textContent="Tiempo: — s";
    });
  }

  function start(){
    cancelAnimationFrame(anim);
    prepare();
    paused=false;t0=performance.now();startOffsets={water:0,oil:0,honey:0};
    loop();
  }

  function pause(){
    if(paused)return;paused=true;cancelAnimationFrame(anim);
    const now=performance.now();
    Object.keys(durations).forEach(k=>{
      const prog=(now-t0)/1000;startOffsets[k]=Math.min(prog,durations[k]);
    });
  }

  function resume(){
    if(!paused)return;paused=false;t0=performance.now();loop();
  }

  function loop(){
    anim=requestAnimationFrame(loop);
    const now=performance.now(),elapsed=(now-t0)/1000;
    let allDone=true;
    Object.keys(durations).forEach(k=>{
      const sphere=spheres[k],tube=tubes[k],timeBox=times[k];
      const total=durations[k],eff=Math.min(total,startOffsets[k]+elapsed);
      const frac=eff/total;
      const maxTravel=tube.clientHeight-60;
      sphere.style.top=(12+frac*maxTravel)+"px";
      if(frac>=1){timeBox.textContent="Tiempo: "+total.toFixed(1)+" s";}
      else{allDone=false;}
    });
    if(allDone)cancelAnimationFrame(anim);
  }

  startBtn.onclick=start;
  pauseBtn.onclick=pause;
  resumeBtn.onclick=resume;
  prepare();
})();
</script>
</body>
</html>
